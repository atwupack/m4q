<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>Title</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <form onsubmit="submitFormLong(this); return false;">
        <input type="text" value="123" name="inp1">
        <input type="text" value="test" name="inp2">
        <button>Send</button>
    </form>

    <hr>
    <form id="f" action="http://localhost/post.php" method="post" onsubmit="submitForm(this); return false;">
        <input type="text" value="123" name="inp1">
        <input type="text" value="test" name="inp2">
        <button>Send</button>
    </form>

    <hr>
    <div>
        <input type="file" value="test" name="fileInp" id="fileInp">
        <button onclick="testPostFileInput()">Send file</button>
    </div>



    <script src="../build/m4q.js"></script>
    <script>

        function submitFormLong(){
            $.get(
                "shigakukan.zip",
                null, null, {
                    onprogress: function(e, x){
                        console.log(e.loaded + " bytes transferred\n");
                        if (e.loaded > 104267776) {
                                x.abort();
                                console.log("Aborted");
                        }
                    },
                    onstate: function(e, x){
                        console.log(x.readyState);
                    }
                }
            ).then(function(response){
                console.log("Long response executed", response);
            }, function(xhr){
                console.log("Error", xhr);
            });
        }

        function submitForm(form){
            $.post(
                "http://localhost/post.php",
                form
            ).then(function(response){
                console.log("File input", response);
            }, function(xhr){
                console.log("Error", xhr);
            });
        }

        function testPostFileInput(){
            var data = document.getElementById("fileInp");
            $.post(
                "http://localhost/post.php",
                data, null, {returnValue: 'xhr'}
            ).then(function(response){
                console.log("File input", response);
            }, function(xhr){
                console.log("Error", xhr);
            });
        }

        // var data = {
        //     agreement: "on",
        //     password: "123123",
        //     username: "chongzia"
        // };
        // $.post(
        //     "http://localhost/post.php",
        //     data
        // ).then(function(response){
        //     console.log("Object", response);
        // }, function(xhr){
        //     console.log("Error", xhr);
        // });
        //
        // $.post(
        //     "http://localhost/post.php",
        //     document.getElementById("f")
        // ).then(function(response){
        //     console.log("Form", response);
        // }, function(xhr){
        //     console.log("Error", xhr);
        // });
    </script>
</body>
</html>